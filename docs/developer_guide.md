# Developer Guide

This guide explains how to contribute features, verify governance receipts, and maintain Tessrax quality standards.

## Repository Conventions

- Use feature branches following `topic/short-description` naming.
- Commit messages follow [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/).
- Format Python code with `ruff format` and lint with `ruff check` (configured via `pyproject.toml`).

## Local Development Workflow

```bash
python3.10 -m venv .venv --prompt tessrax
source .venv/bin/activate
python --version  # should report Python 3.10.x
pip install -r requirements.txt
pip install -e .[dev]
pre-commit install
```

1. Update dependencies via `requirements.txt` and regenerate `requirements-lock.txt` with `pip freeze > requirements-lock.txt`.
2. Create or update tests in `tests/` for each change.
3. Run `ruff format` and respect `.flake8` import rules (absolute `tessrax.*` imports only).
4. Export `PYTHONPATH=$(pwd):$PYTHONPATH` and execute `pytest -q` before submitting a pull request.

> Placeholder data for runtime stability lives in `ledger/ledger.jsonl` and `tessrax/docs/CorporateFrienthropy/company_frienthropy.csv`. Replace these artifacts with production datasets during deployments.

## Running the Test Suite

```bash
pytest --maxfail=1 --disable-warnings -q
```

To capture coverage metrics:

```bash
pytest --cov=tessrax --cov-report=term-missing
```

## Governance Ledger Verification

1. Collect ledger receipts (JSON Lines) generated by simulations or production deployments.
2. Run `python -m tessrax.ledger.verify path/to/ledger.jsonl` (or the legacy `python -m tessrax.ledger verify ...`).
3. The verifier recomputes hashes, signature placeholders, and chronological order.
4. Investigate any reported divergence before approving deployments.

## Dashboard Development Workflow

1. Install dependencies with `npm install --prefix dashboard`.
2. Launch the development server using `npm run dev --prefix dashboard`.
3. Point API calls at a local backend (`http://localhost:8000`) or a staging environment.
4. Capture snapshots for documentation in `dashboard/snapshots/`.

## Contribution Process

1. Discuss new proposals through GitHub issues or the community forum.
2. Fork or branch from `main`.
3. Open a pull request with:
   - Summary of changes and motivation.
   - Test evidence (command output or screenshots).
   - Security considerations and mitigation steps.
4. Await review from at least one maintainer before merging.

## Release Process

1. Update the version in `pyproject.toml` and `tessrax/__init__.py`.
2. Generate release notes summarising features, fixes, and compatibility concerns.
3. Tag the release (`git tag vX.Y.Z && git push --tags`).
4. Publish to PyPI/internal registry via `python -m build` and `twine upload dist/*` if applicable.

## Security & Responsible Disclosure

- Follow the policy defined in [SECURITY.md](../SECURITY.md).
- Never commit secrets. Use environment variables or vault integrations.
- Report vulnerabilities privately before public disclosure.
